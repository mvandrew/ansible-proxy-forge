# Ansible Proxy Forge

Автоматизированная настройка прокси и VPN серверов с использованием Ansible.

## Описание

Ansible Proxy Forge - это набор Ansible-ролей и плейбуков для автоматизированной настройки и управления прокси и VPN-серверами. Проект включает роли для настройки:

- Squid прокси-сервера с доступом по белым спискам IP-адресов
- OpenVPN сервера с современными алгоритмами шифрования
- Базовой защиты SSH
- Общих настроек безопасности системы

## Структура проекта

```
ansible-proxy-forge/
├── ansible.cfg           # Конфигурация Ansible
├── inventory.ini         # Инвентарь с целевыми серверами
├── playbook.yml          # Основной плейбук
├── group_vars/           # Переменные для групп серверов
│   └── all/              # Общие переменные
│       ├── vars.yml      # Основные переменные
│       └── secrets.yml   # Секретные данные (зашифровать!)
├── host_vars/            # Переменные для конкретных хостов
├── roles/                # Роли Ansible
│   ├── common/           # Базовая настройка системы
│   ├── squid/            # Настройка прокси-сервера
│   ├── openvpn/          # Настройка VPN-сервера
│   ├── ssh/              # Улучшение безопасности SSH
│   └── security/         # Общие меры безопасности
├── files/                # Статические файлы
└── templates/            # Шаблоны конфигурации
```

## Использование

1. Клонируйте репозиторий
2. Обновите inventory.ini с вашими целевыми серверами
3. Настройте переменные в group_vars и host_vars
4. Зашифруйте secrets.yml с помощью ansible-vault
5. Запустите playbook:

```bash
ansible-playbook playbook.yml --ask-vault-pass
```

Для запуска отдельных ролей используйте теги:

```bash
ansible-playbook playbook.yml --tags "proxy,squid" --ask-vault-pass
```

## Безопасность

Прежде чем использовать в производственной среде, убедитесь что:
1. Файл secrets.yml зашифрован с помощью ansible-vault
2. Пароль vault хранится безопасно
3. Используются частные ключи SSH для аутентификации
4. Проверены права доступа к конфигурационным файлам

## Лицензия

MIT
